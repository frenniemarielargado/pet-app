import 'package:day_picker/day_picker.dart';
import 'package:flutter/material.dart';


class ScheduleFeeding extends StatefulWidget {
  const ScheduleFeeding({Key? key}) : super(key: key);

  @override
  State<ScheduleFeeding> createState() => _ScheduleFeedingState();
}

class _ScheduleFeedingState extends State<ScheduleFeeding> {
  final List<DayInWeek> _days = [
    DayInWeek("Sun", dayKey: ''),
    DayInWeek("Mon", dayKey: ''),
    DayInWeek("Tue", isSelected: true, dayKey: ''),
    DayInWeek("Wed", dayKey: ''),
    DayInWeek("Thu", dayKey: ''),
    DayInWeek("Fri", dayKey: ''),
    DayInWeek("Sat", dayKey: ''),
  ];

  int _selectedPortion = 1; // Newly added portion variable

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: const Color(0xFFFFFEF6),
      appBar: AppBar(
        title: const Text(
          'Schedule Feed',
          style: TextStyle(
            fontFamily: 'Poppins',
            fontSize: 20,
            fontWeight: FontWeight.w600,
            color: Colors.black,
          ),
        ),
        backgroundColor: Colors.transparent,
        elevation: 0,
        leading: IconButton(
          icon: const Icon(Icons.arrow_back, color: Colors.black),
          onPressed: () {
            Navigator.pop(context);
          },
        ),
        centerTitle: true,
      ),
      body: Center(
        child: Padding(
          padding: const EdgeInsets.all(8.0),
          child: Column( // Wrap SelectWeekDays and DropdownButton in a Column
            children: [
              DefaultTextStyle(
                style: const TextStyle(
                  fontFamily: 'YourCustomFontFamily',
                  fontSize: 14,
                  fontWeight: FontWeight.w500,
                ),
                child: SelectWeekDays(
                  days: _days,
                  backgroundColor: Colors.transparent,
                  daysFillColor: const Color(0xFFFFE9BC),
                  selectedDayTextColor: const Color(0xFF5C5C5C),
                  unSelectedDayTextColor: const Color(0xFF5C5C5C),
                  border: false,
                  onSelect: (values) {
                    // Accessing selected portion value
                    print('Selected Portion: $_selectedPortion');
                    print(values);
                  },
                ),
              ),
              const SizedBox(height: 16),
              Container(
                width: 350, // Set desired width for the dropdown button
                padding: const EdgeInsets.symmetric(horizontal: 12),
                decoration: BoxDecoration(
                  color: Colors.white,
                  borderRadius: BorderRadius.circular(8),
                  boxShadow: [
                    BoxShadow(
                      color: Colors.black.withOpacity(0.1),
                      offset: Offset(0, 2),
                      blurRadius: 4,
                    ),
                  ],
                ),
                child: Row(
                  children: [
                    const Text(
                      'Portion',
                      style: TextStyle(
                        fontFamily: 'YourCustomFontFamily',
                        fontSize: 14,
                        fontWeight: FontWeight.w500,
                        color: Colors.black,
                      ),
                    ),
                    const SizedBox(width: 0),
                    Expanded(
                      child: Stack(
                        alignment: Alignment.centerRight, // Align items to the right
                        children: [
                          DropdownButton<int>(
                            value: _selectedPortion,
                            onChanged: (newValue) {
                              setState(() {
                                _selectedPortion = newValue!;
                              });
                            },
                            style: const TextStyle(
                              fontFamily: 'YourCustomFontFamily',
                              fontSize: 14,
                              fontWeight: FontWeight.w500,
                              color: Colors.black,
                            ),
                            underline: const SizedBox(),
                            icon: const Icon(Icons.arrow_drop_down),
                            iconSize: 24,
                            elevation: 4,
                            items: List.generate(5, (index) {
                              final portion = index + 1;
                              return DropdownMenuItem<int>(
                                value: portion,
                                child: Text('$portion'),
                              );
                            }),
                          ),
                          Positioned( // Position the selected portion
                            right: 32,
                            child: Text(
                              '$_selectedPortion',
                              style: const TextStyle(
                                fontFamily: 'YourCustomFontFamily',
                                fontSize: 14,
                                fontWeight: FontWeight.w500,
                                color: Colors.black,
                              ),
                            ),
                          ),
                        ],
                      ),
                    ),
                  ],
                ),
              ),
            ],
          ),
        ),
      ),
    );
  }
}
